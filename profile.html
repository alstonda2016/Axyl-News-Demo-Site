<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <title>Axyl News-Breaking News from all the Top News Sites</title>
    <meta charset="UTF-8">
    <meta name="description" content="See every side of the the latest breaking news by reading what all the top news sites are saying in one place">
    <meta name="keywords" content="news,bipartisan,axyl,democrat,republican, fair, breaking news, trump, obama">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="alIcon.png">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway"> -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Roboto:700" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> 

    <link rel="stylesheet" href="css/des.css">  

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-132770311-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-132770311-1');
</script>


    <body>

        <!-- Navbar (sit on top) -->
        <div class="w3-top" >
            <div class="w3-bar w3-white w3-card" id="myNavbar" >
                <!--  <a href="hometest.html" class="w3-bar-item w3-button w3-wide">AXYL</a> -->



                <!--   <img width="237" height="60" class="pull-left w3-bar-item  w3-wide" onclick="gtHome()" alt="sample-image" src="anl1.png">  -->
                <a href="index.html">
                    <img src="al5.png"
                         width="200" height="60" class="pull-left w3-bar-item  w3-wide"
                         >
                </a>


                <!-- Right-sided navbar links -->
                <div class="w3-right w3-hide-small w3-hide-medium">
                           <a href="el.html"  class=" w3-bar-item w3-button ">Election 2020</a>	

                                       <a href="wh.html"  class=" w3-bar-item w3-button ">Trump</a>	

                    <a href="us_news.html" title="" class=" w3-bar-item w3-button">National</a>
                    <a href="world_news.html" title=""  class=" w3-bar-item w3-button">World</a>
                    <!--  <a href="profile.html"  class="w3-bar-item w3-button">Election 2020</a> -->	
                    <a  id="profBtn" onclick="gtAS()" class="w3-bar-item w3-button thickBorder boldFont">  </a>										

                    <!--    <a href="hometest.html"  class="w3-bar-item w3-button">test</a> -->
                    <!--
<a href="#about" class="w3-bar-item w3-button">ABOUT</a>
<a href="#team" class="w3-bar-item w3-button"><i class="fa fa-user"></i> TEAM</a>
<a href="#work" class="w3-bar-item w3-button"><i class="fa fa-th"></i> WORK</a>
<a href="#pricing" class="w3-bar-item w3-button"><i class="fa fa-usd"></i> PRICING</a>
<a href="#contact" class="w3-bar-item w3-button"><i class="fa fa-envelope"></i> CONTACT</a>
                    -->
                </div>
                <!-- Hide right-floated links on small screens and replace them with a menu icon -->

                <a href="javascript:void(0)" class="w3-bar-item w3-button w3-right w3-hide-large " onclick="w3_open()">
                    <i class="fa fa-bars"></i>

                </a>
            </div>
        </div>

        <!-- Sidebar on small screens when clicking the menu icon -->
        <nav class="w3-sidebar w3-bar-block w3-black w3-card w3-animate-left  w3-hide-large" style="display:none" id="mySidebar">
            <a href="javascript:void(0)" onclick="w3_close()" class="w3-bar-item w3-button w3-large w3-padding-16 redText " >X</a>
            <!--   <img src="Group.png" width="20" height="20" class='centerTabImage'> -->
            <a href="el.html" onclick="w3_close()" class="w3-bar-item w3-button ">Election 2020</a>

            <a href="wh.html" onclick="w3_close()" class="w3-bar-item w3-button ">Trump</a>

            <a href="us_news.html" onclick="w3_close()" class="w3-bar-item w3-button">National</a>
            <a href="world_news.html" onclick="w3_close()" class="w3-bar-item w3-button">World</a>
            <hr>    
            <a id="accBtnSO" onclick="w3_close_SI()" class="w3-bar-item w3-button boldFont">Sign In</a>

        </nav>

        <!-- Header with full-height image -->
        <header class=" w3-bar-block w3-grayscale-min" id="home">


        </header>



        <!-- Modal for full size images on click-->
        <div id="modal01" class="w3-modal w3-black" onclick="this.style.display = 'none'">
            <span class="w3-button w3-xxlarge w3-black w3-padding-large w3-display-topright" title="Close Modal Image">Ã—</span>
            <div class="w3-modal-content w3-animate-zoom w3-center w3-transparent w3-padding-64">
                <img id="img01" class="w3-image">
                <p id="caption" class="w3-opacity w3-large"></p>
            </div>
        </div>
        <br>
        <br>






        <div class="tab">
            <button id = "btt1" class="tablinks" onclick="historyy()">History</button>
            <button id = "btt2" class="tablinks" onclick="submissionHistory()">My URL Submissions</button>
            <button id = "btt" class="tablinks" onclick="signOut()" style="float: right;">Sign Out</button> 

        </div>
        <!--
           <h6 id="ya"></h6>
      <img id="imgProf" class="w3-image profImg" width="50" height="50" src="testIcon.png">
        -->

        <ul id="mainList">
        </ul>  

        <footer class="w3-center w3-black w3-padding-32">
            <a href="#home" class="w3-button w3-light-grey"><i class="fa fa-arrow-up w3-margin-right"></i>To the top</a>

            <p>Copyright 2019</p>
        </footer>

        <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase.js"></script>
        <script id="erasable">
            
    function isIE() {
    var ua = window.navigator.userAgent; //Check the userAgent property of the window.navigator object
    var msie = ua.indexOf('MSIE '); // IE 10 or older
    var trident = ua.indexOf('Trident/'); //IE 11

    return (msie > 0 || trident > 0);
}


//function to show alert if it's IE
function ShowIEAlert(){
    if(isIE()){
                    window.location = "iePage.html"
    }
}        
    
      var isIE = /Trident/.test(navigator.userAgent) || /MSIE/.test(navigator.userAgent);
if(isIE){
                        window.location = "iePage.html"
}
    
    var config = {
    apiKey: "AIzaSyC78ygb5kaYfS9RVSu1KOCw-XLmyB2OuXU",
    authDomain: "poliapp-c85e3.firebaseapp.com",
    databaseURL: "https://poliapp-c85e3.firebaseio.com",
    projectId: "poliapp-c85e3",
    storageBucket: "poliapp-c85e3.appspot.com",
    messagingSenderId: "594264278951"
  };
  //var res = encodeURI(uri);

  firebase.initializeApp(config);

            var isi = false;

    window.fbAsyncInit = function() {
      FB.init ({
         appId      : '267503890776887',
         xfbml      : true,
         version    : 'v2.6'
      });
   };

   (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js";
      fjs.parentNode.insertBefore(js, fjs);
   } (document, 'script', 'facebook-jssdk'));

        
        var provider = new firebase.auth.FacebookAuthProvider();

    
    
    
     var profBtn = document.getElementById("profBtn");
              var profBtn2 = document.getElementById("accBtnSO");



    firebase.auth().onAuthStateChanged(firebaseUser =>
    {
        if(firebaseUser){
                            profBtn.innerText = 'Sign In';
                            profBtn2.innerText = 'Sign In';

                            isi = true;
           var user = firebase.auth().currentUser;
            if(user!= null){
                            profBtn.innerText = 'My Account';
                             profBtn2.innerText = 'My Account';
                           
                        isi = true;
                                   //  document.body.style.backgroundColor = "red";

   
            }

        }
        else{
                            profBtn.innerText = 'Sign In';
                             profBtn2.innerText = 'Sign In';
isi = false;
        }




    })
    
    

    
    
    
    function gtAS(){
      if(isi){
            //alert("yip")
                    window.location = "profile.html"

        }
        else{
            
            if (confirm('Sign in with Facebook')) {
                       firebase.auth().signInWithPopup(provider).then(function(result) {
                     //   document.body.style.backgroundColor = "red";

      var token = result.credential.accessToken;
      var user = result.user;

       if(user!= null){
                        isi = true;
                    window.location = "profile.html"

   
            }
            
   }).catch(function(error) {
                              // document.body.style.backgroundColor = "blue";

     /* console.log(error.code);
      console.log(error.message);
      */
   });
    // Save it!
} else {
    // Do nothing!
}
 
            
            
                       // alert("SI With Facebook")
                        
                    
   


        }
        
    }
    

      function onClick(element) {
      document.getElementById("img01").src = element.src;
      document.getElementById("modal01").style.display = "block";
      var captionText = document.getElementById("caption");
      captionText.innerHTML = element.alt;
    }


    // Toggle between showing and hiding the sidebar when clicking the menu icon
    var mySidebar = document.getElementById("mySidebar");

    function w3_open() {

      if (mySidebar.style.display === 'block') {
        mySidebar.style.display = 'none';
      } else {
        mySidebar.style.display = 'block';
      }
    }

    // Close the sidebar with the close button
    function w3_close() {
        mySidebar.style.display = "none";

    }


    function w3_close_SI() {

        mySidebar.style.display = "none";

        gtAS();
    }

  function timeSince(date) {

  var seconds = Math.floor((new Date() - date) / 1000);

  var interval = Math.floor(seconds / 31536000);

  if (interval > 1) {
    return interval + " years";
  }
  interval = Math.floor(seconds / 2592000);
  if (interval > 1) {
    return interval + " months";
  }
  interval = Math.floor(seconds / 86400);
  if (interval > 1) {
    return interval + " days";
  }
  interval = Math.floor(seconds / 3600);
  if (interval > 1) {
    return interval + " hours";
  }
  interval = Math.floor(seconds / 60);
  if (interval > 1) {
    return interval + " minutes";
  }
  return Math.floor(seconds) + " seconds";
}

/*
    function gtAS(){
        if(isi){
            //alert("yip")
                    window.location = "profile.html"

        }
        else{
            
            if (confirm('Sign in with Facebook')) {
                       firebase.auth().signInWithPopup(provider).then(function(result) {
                     //   document.body.style.backgroundColor = "red";

      var token = result.credential.accessToken;
      var user = result.user;

       if(user!= null){
                        isi = true;
                    window.location = "profile.html"

   
            }
            
   }).catch(function(error) {
                              // document.body.style.backgroundColor = "blue";

     /* console.log(error.code);
      console.log(error.message);
     
   });
    // Save it!
} else {
    // Do nothing!
}
 
            
            
                       // alert("SI With Facebook")
                        
                    
   


        }
        
    }
*/

function gtUN(){
                window.location = "us_news.html"

          }
          function gtGlobal(){
                window.location = "world_news.html"

          }
          function gtWhiteHouse(){
                window.location = "wh.html"

          }
          
          
          
           function gtHome() {
                       window.location = "hometest.html"

    }



















        var name, email, photoUrl, uid, emailVerified;

        var btt1 = document.getElementById('btt1');
        var btt2 = document.getElementById('btt2');

        var profBtn = document.getElementById("profBtn");
        var profBtn2 = document.getElementById("accBtnSO");

        firebase.auth().onAuthStateChanged(firebaseUser =>
        {
            if (firebaseUser) {
                var user = firebase.auth().currentUser;
                if (user != null) {
                    profBtn.innerText = 'My Account';
                    profBtn2.innerText = 'My Account';
                    name = user.displayName;
                    email = user.email;
                    photoUrl = user.photoURL;
                    emailVerified = user.emailVerified;
                    uid = user.uid;
                    historyy()



                }

            } else {
                window.location = "index.html"
                profBtn.innerText = 'Sign In';
                profBtn2.innerText = 'Sign In';

            }




        })


        //  bigy.innerText = 'e';
        function historyy() {
            btt2.style.background = '#f1f1f1';
            btt1.style.background = '	#DCDCDC';

            var ull = document.getElementById("mainList");
            ull.innerHTML = '';
            var ref = firebase.database().ref().child("USERVIEWHISTORY").child(uid).orderByChild('viewTimeInverse');
            ref.once('value', function (snapshot) {
                snapshot.forEach(function (childSnapshot) {
                    var childKey = childSnapshot.key;
                    var childSnapVal = childSnapshot.val();
                     var childData = childSnapVal.topicObject
                    var topicCategory = childData.topicCategory;

                    var ul = document.getElementById("mainList");
                    var li = document.createElement('li');
                    var g = document.createElement('div');
                    //g.setAttribute("123", "Div1");
                    g.style.height = "50";
                    li.appendChild(g);

                    var date = timeSince(new Date(childSnapVal.viewTime ));


                    var div = document.createElement('div');
                    div.className = 'row';

                   // div.innerHTML = '<hr><div class="w3-row ">\<div class="w3-third w3-container">\<img src="' + childData.strPicURL + '" width="350" height="200" class="pull-left w3-bar-item  w3-wide fillwidthy">\</div>\<div class="w3-twothird w3-container">\<p>' + date + ' ago</p>\<h3 class="boldFont">' + childData.topicName + '</h3>\<p>' + childData.lstArticleHeadlines + '</p>\</div>\</div>'
                    div.innerHTML = '<hr><div class="w3-row ">\<div class="w3-third w3-container">\<img src="' + childData.strPicURL + '" width="350" height="200" class="pull-left w3-bar-item  w3-wide fillwidthy">\</div>\<div class="w3-twothird w3-container">\<p>  </p>\<h3 class="boldFont">' + childData.topicName + '</h3>\<p>' + childData.lstArticleHeadlines + '</p>\</div>\</div>'


                    div.onclick = function () {
                        // alert(this.innerHTML);

/*
                        // var getInput = prompt("Hey type something here: ");
                        localStorage.setItem("storageName", childKey);


                        //window.location = "www.example.com"
                        window.location = "topic.html"
                        */

 var uri = 'topic.html?pvi='+childKey+'&ct='+topicCategory;
                                          //pix.innerText = uri
            
                                           window.location = uri


                    };

                    li.appendChild(div);
                    ul.appendChild(li);
                });
            });

        }
        function submissionHistory() {
            btt2.style.background = '#DCDCDC';
            btt1.style.background = '	#f1f1f1';
            var ull = document.getElementById("mainList");
            ull.innerHTML = '';

            var ref = firebase.database().ref().child("PROPOSED_ARTICLES_USER_HISTORY").child(uid).orderByChild('proposalTimeInverse');
            ref.once('value', function (snapshot) {
                snapshot.forEach(function (childSnapshot) {
                    var childKey = childSnapshot.key;
                    var childData = childSnapshot.val();
                    var ul = document.getElementById("mainList");
                    var li = document.createElement('li');
                    var g = document.createElement('div');
                    //g.setAttribute("123", "Div1");
                    g.style.height = "50";
                    li.appendChild(g);
                    var div = document.createElement('div');
                    div.className = 'row';
                    //div.innerHTML ='<label> "'+childData.proposalTopicName+'" </label>';
                    var date = timeSince(new Date(childData.proposalTime));



                    if (childData.proposalStatus == "PENDING") {
                        div.innerHTML = '<div class=" s9 w3-container w3-row ">\<hr>\<p> </p>\<h3>' + childData.proposalTopicName + '</h3>\<p>' + childData.strArticleURL + '</p>\<p>' + childData.proposalStatusDescription + '</p>\<h6>' + childData.strRundownPoint1 + '</h6>\</div>'
                    } else {
                        div.innerHTML = '<div class="s9 w3-container w3-row ">\<hr>\<p> </p>\<h3>' + childData.proposalTopicName + '</h3>\<p>' + childData.strArticleURL + '</p>\<p>' + childData.proposalStatus + '</p>\<p>' + childData.proposalStatusDescription + '</p>\<h6>' + childData.strRundownPoint1 + '</h6>\</div>'

                    }
                 

                  //  div.innerHTML = '<hr><div class="w3-row ">\<div class="w3-third w3-container">\<img src="' + childData.strArticleURL + '" width="350" height="200" class="pull-left w3-bar-item  w3-wide fillwidthy">\</div>\<div class="w3-twothird w3-container">\<p>' + date + ' ago</p>\<h3 class="boldFont">' + childData.proposalStatusDescription + '</h3>\<p>Including articles from: ' + childData.proposalStatusDescription + '</p>\</div>\</div>'


                    li.appendChild(div);
                    ul.appendChild(li);
                });
            });

        }
        function signOut() {

            firebase.auth().signOut().then(function () {
                // Sign-out successful.
            }).catch(function (error) {
                // An error happened.
            });

            window.location = "index.html"


        }
            document.getElementById('erasable').innerHTML = "";

        </script>


    </body>

</html>
